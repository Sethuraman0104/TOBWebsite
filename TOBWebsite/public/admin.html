<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">News Times of Bahrain</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
  <!-- Top Bar -->
  <header class="topbar">
    <div class="topbar-left">
      <img src="images/TOBTransparent.png" alt="Logo" class="topbar-logo">
      <h1>Times of Bahrain - Admin Console</h1>
    </div>
    <div class="topbar-right">
      <span id="welcomeUser">Welcome, ...</span>
      <input type="text" id="newsSearch" placeholder="Search news...">
      <button id="logoutBtn"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
    </div>
  </header>

  <aside class="sidebar">
    <div class="sidebar-logo">
      <img src="images/TOBTransparent.png" alt="Logo">
    </div>
    <hr class="logo-divider">
    <nav class="menu">
      <ul>
        <li class="active" data-section="publish"><i class="fa-solid fa-pen-to-square"></i> Create News</li>
        <li data-section="pending"><i class="fa-solid fa-hourglass-half"></i> Unpublished News</li>
        <li data-section="allnews"><i class="fa-solid fa-newspaper"></i> Published News</li>
        <li data-section="inactive"><i class="fa-solid fa-ban"></i> Deactivated News</li>
        <li data-section="trending"><i class="fa-solid fa-fire"></i> Manage Trending</li>
        <li data-section="comments"><i class="fa-solid fa-comments"></i> Comments</li>
        <li data-section="managecategories"><i class="fa-solid fa-screwdriver-wrench"></i> Manage Categories</li>
        <li data-section="profile"><i class="fa-solid fa-user"></i> Profile</li>
      </ul>
    </nav>
    <div class="sidebar-footer">
      <div id="lastLoginDisplay"></div>
      <div id="currentDateTime"></div>
      <div>¬© Times of Bahrain | Created by HR Info</div>
    </div>
  </aside>

  <main class="main-content">
    <!-- Publish News -->
    <section id="publish" class="section active">
      <div class="floating-title">üìù Create News</div>
      <div class="card form-card">
        <form id="postNewsForm" enctype="multipart/form-data">
          <label>Title (English)</label>
          <input type="text" name="Title" placeholder="Enter English Title" required>
          <label>Title (Arabic)</label>
          <input type="text" name="Title_Ar" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
          <label>Content (English)</label>
          <textarea name="Content" placeholder="Enter English Content" required></textarea>
          <label>Content (Arabic)</label>
          <textarea name="Content_Ar" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"></textarea>
          <!-- <label>Category ID</label>
        <input type="number" name="CategoryID" value="1" required> -->
          <label>Category</label>
          <select name="CategoryID" id="createCategorySelect" class="custom-dropdown" required>
            <option value="">-- Select Category --</option>
          </select>

          <label>Image</label>
          <input type="file" name="image">
          <label><input type="checkbox" name="IsTopStory" value="true"> Mark as Top Story</label>
          <label><input type="checkbox" name="IsFeatured" value="true"> Mark as Featured</label>
          <button type="submit">Post News</button>
        </form>
        <div id="postNewsMsg" class="message"></div>
      </div>
    </section>

    <!-- Pending News -->
    <section id="pending" class="section">
      <div class="floating-title">‚è≥ Unpublished News</div>
      <div id="pendingNewsContainer"></div>
    </section>

    <!-- All Published News -->
    <section id="allnews" class="section">
      <div class="floating-title">üìÑ Published News</div>
      <div class="filter-card">
        <label>Month: <input type="month" id="filterMonth"></label>
        <button id="applyFilter">Apply</button>
      </div>
      <div id="allNewsEngagement"></div>
    </section>

    <section id="inactive" class="section">
      <div class="floating-title">üö´ Deactivated News</div>
      <div id="inactiveNewsContainer"></div>
    </section>

    <!-- Trending Section -->
    <section id="trending" class="section">
      <div class="floating-title">üî• Manage Trending Cards</div>

      <div class="top-actions"
        style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
        <div class="filter-card" style="display: flex; gap: 10px; align-items: center;">
          <label>Month:</label>
          <input type="month" id="filterTrendMonth">
          <label>Status:</label>
          <select id="filterTrendStatus">
            <option value="all">All</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
          </select>
          <button id="applyTrendFilter" class="btn btn-secondary"><i class="fa fa-filter"></i> Apply</button>
        </div>

        <button id="addTrendBtn" class="btn btn-primary" style="padding: 8px 16px;">
          <i class="fa-solid fa-plus"></i> Add New Trend
        </button>
      </div>

      <div id="trendsContainer" class="trends-grid"></div>
    </section>

    <!-- Comments -->
    <section id="comments" class="section">
      <div class="floating-title">üí¨ Comments Management</div>
      <div id="articlesWithComments" class="articles-grid"></div>
      <!-- Comments Modal -->
      <div class="modal fade" id="commentsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content p-3">
            <div class="modal-header">
              <h5 class="modal-title">Comments for <span id="modalArticleTitle"></span></h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <h6 class="fw-bold text-warning mt-3">üïì Pending Comments</h6>
              <div id="pendingComments" class="mb-3"></div>

              <h6 class="fw-bold text-success">‚úÖ Approved Comments</h6>
              <div id="approvedComments" class="mb-3"></div>

              <h6 class="fw-bold text-danger mt-3">üö´ Rejected Comments</h6>
              <div id="rejectedComments"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Manage Categories -->
    <section id="managecategories" class="section container py-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>üóÇÔ∏è Manage Categories</h3>
        <button id="addCategoryBtn" class="btn btn-primary">
          <i class="fa-solid fa-plus"></i> Add New Category
        </button>
      </div>

      <!-- Search Input -->
      <div class="mb-3">
        <input type="text" id="categorySearch" class="form-control" placeholder="Search categories...">
      </div>

      <!-- Grid / Table -->
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle" id="categoriesTable">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Category Name (EN)</th>
              <th>Category Name (AR)</th>
              <th>Description (EN)</th>
              <th>Description (AR)</th>
              <th>Active</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Pagination -->
      <nav>
        <ul class="pagination justify-content-center" id="categoryPagination"></ul>
      </nav>
    </section>

    <!-- Category Modal -->
    <div class="modal fade" id="categoryModal" tabindex="-1">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content p-3">
          <div class="modal-header">
            <h5 id="categoryModalTitle" class="modal-title">Add Category</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <form id="categoryForm" class="p-2">
            <input type="hidden" id="CategoryID">
            <div class="row mb-3">
              <div class="col-md-6">
                <label>Category Name (English)</label>
                <input type="text" id="CategoryName" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label>Category Name (Arabic)</label>
                <input type="text" id="CategoryName_Ar" class="form-control">
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-6">
                <label>Description (English)</label>
                <textarea id="Description" class="form-control"></textarea>
              </div>
              <div class="col-md-6">
                <label>Description (Arabic)</label>
                <textarea id="Description_Ar" class="form-control"></textarea>
              </div>
            </div>
            <div class="form-check mb-3">
              <input type="checkbox" class="form-check-input" id="IsActive" checked>
              <label class="form-check-label" for="IsActive">Active</label>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-success">
                <i class="fa fa-save"></i> Save
              </button>
              <button type="button" class="btn btn-secondary" id="closeCategoryModalFooter">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <section id="profile" class="section">
      <div class="profile-card">
        <div class="profile-header">
          <h2>üë§ Profile</h2>
          <button type="button" id="openChangePasswordBtn" class="btn btn-secondary">Change Password</button>
        </div>

        <form id="profileForm" class="profile-form">
          <div class="form-group">
            <label for="profileFullName">Full Name</label>
            <input type="text" id="profileFullName" name="FullName" required>
          </div>

          <div class="form-group">
            <label for="profileEmail">Email</label>
            <input type="email" id="profileEmail" name="Email" required>
          </div>

          <div class="form-footer">
            <span id="profileMsg" class="text-success"></span>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Add/Edit Trend Modal -->
    <div id="trendModal" class="modal">
      <div class="modal-content">
        <span id="closeTrendModal" class="close">&times;</span>
        <h2 id="trendModalTitle">Add Trend</h2>
        <form id="trendForm" enctype="multipart/form-data">
          <input type="hidden" id="TrendID" name="TrendID">

          <label>Title (English)</label>
          <input type="text" name="TrendTitle_EN" id="TrendTitle_EN" required>

          <label>Title (Arabic)</label>
          <input type="text" name="TrendTitle_AR" id="TrendTitle_AR">

          <label>Description (English)</label>
          <textarea name="TrendDescription_EN" id="TrendDescription_EN"></textarea>

          <label>Description (Arabic)</label>
          <textarea name="TrendDescription_AR" id="TrendDescription_AR"></textarea>

          <label>Image</label>
          <input type="file" name="Image" id="TrendImage">

          <label>From Date</label>
          <input type="date" name="FromDate" id="FromDate" required>

          <label>To Date</label>
          <input type="date" name="ToDate" id="ToDate">

          <label><input type="checkbox" name="IsActive" id="IsActive" checked> Active</label>

          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
      <div class="modal-content">
        <span id="closePasswordModal" class="close">&times;</span>
        <h2>Change Password</h2>
        <form id="changePasswordForm">
          <label for="CurrentPassword">Current Password</label>
          <input type="password" id="CurrentPassword" name="CurrentPassword" required>

          <label for="NewPassword">New Password</label>
          <input type="password" id="NewPassword" name="NewPassword" required>

          <label for="ConfirmPassword">Confirm New Password</label>
          <input type="password" id="ConfirmPassword" name="ConfirmPassword" required>

          <button type="submit">Change Password</button>
          <p id="changePasswordMsg" class="msg"></p>
        </form>
      </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Edit News</h2>
        <form id="editNewsForm" enctype="multipart/form-data">
          <input type="hidden" name="ArticleID" id="editArticleID">
          <label>Title (English)</label>
          <input type="text" name="Title" id="editTitle" required>
          <label>Title (Arabic)</label>
          <input type="text" name="Title_Ar" id="editTitle_Ar">
          <label>Content (English)</label>
          <textarea name="Content" id="editContent" required></textarea>
          <label>Content (Arabic)</label>
          <textarea name="Content_Ar" id="editContent_Ar"></textarea>
          <!-- <label>Category ID</label>
      <input type="number" name="CategoryID" id="editCategoryID" required> -->
          <label>Category</label>
          <select name="CategoryID" id="editCategorySelect" class="custom-dropdown" required>
            <option value="">-- Select Category --</option>
          </select>

          <label>Image</label>
          <input type="file" name="image" id="editImage">
          <div id="currentImagePreview" style="margin:10px 0;"></div>
          <label><input type="checkbox" id="editIsTopStory" name="IsTopStory" value="true"> Mark as Top Story</label>
          <label><input type="checkbox" id="editIsFeatured" name="IsFeatured" value="true"> Mark as Featured</label>
          <button type="submit">Save Changes</button>
        </form>
      </div>
    </div>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome (optional for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- Bootstrap Bundle JS (includes Popper.js for modals, dropdowns) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.0/moment.min.js"></script>
    <script src="js/admin.js"></script>
</body>

</html>